# Changelog
All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

<!--
## [x.y.z] - yyyy-mm-dd
### Added
### Changed
### Removed
### Fixed
-->

## Released
## [1.7.0] - 2023-05-27
### Added
- `ulogging` is part of `be_helpers` to be independent from other packages, see #20
- `package.json` file and installation instruction for `mip` usage, see #21
- Content of `package.json` is validated on each test workflow run

### Removed
- Dependency to `micropython-ulogging` package in `setup.py` file

### Fixed
- YAML syntax in all workflow files

## [1.6.1] - 2023-01-29
### Fixed
- Typing hints for `Callable`, `Dict`, `List`, `Optional`, `Tuple` and `Union` are now subscriptable

## [1.6.0] - 2022-12-11
### Added
- Use [changelog-based-release action](https://github.com/brainelectronics/changelog-based-release) to create a draft release with every merge to develop
- Use [changelog-based-release action](https://github.com/brainelectronics/changelog-based-release) to create a drafted prerelease release with every PR build

### Changed
- Apply changes for [micropython-modbus 2.0.0](https://github.com/brainelectronics/micropython-modbus/pull/33), see #16
- Scope of contents permissions in release and test release workflow is now `write` to use auto release creation
- Use `checkout@v3` instead of `checkout@v2` in all workflows
- Line breaks are no longer used in this changelog for enumerations
- Issues are referenced as `#123` instead of `[#123][ref-issue-123]` to avoid explicit references at the bottom or some other location in the file

### Fixed
- Use more specific `noqa` in [`led_helper.py`](be_helpers/led_helper.py)

## [1.5.0] - 2022-11-03
### Added
- Deploy to [Test Python Package Index](https://test.pypi.org/) on every PR
  build with a [PEP440][ref-pep440] compliant `-rc<BUILDNUMBER>.dev<PR_NUMBER>`
  meta data extension
- [Test release workflow](.github/workflows/test-release.yaml) running only on
  PRs is archiving and uploading built artifacts to
  [Test Python Package Index](https://test.pypi.org/)
- [`.flake8`](.flake8) definition file

### Changed
- Version is specified by [`version.py`](be_helpers/version.py) and
  autogenerated on each deploy.

### Fixed
- All uncovered flake8 warnings of [`be_helpers`](be_helpers)

## [1.4.0] - 2022-05-06
### Changed
- `get_uuid` can be used to get the first or last n characters of the unique
  ID of the device, see additional comment in [#11][ref-issue-11]

## [1.3.0] - 2022-04-16
### Added
- `get_uuid` can be used to get the unique ID of the device or with an optional
  parameter `lenght` to return the UUID of desired length, see
  [#11][ref-issue-11]

## [1.2.3] - 2022-03-20
### Fixed
- WiFi station is no longer deactivated if no WiFi networks have been found.
  This might have lead to a disconnection from existing networks, see
  [#9][ref-issue-9]

## [1.2.2] - 2022-03-11
### Changed
- Client data is no logger logged with debug level on `client_data` property
  access to reduce time before data return

## [1.2.1] - 2022-03-07
### Fixed
- Added missing `machine` import to
  [`generic_helper.py`](be_helpers/generic_helper.py)

## [1.2.0] - 2022-03-06
### Added
- [`version.py`](be_helpers/version.py) provides info as semver tuple with
  `__version_info__`
- Raw and human encoded system info data is provided by function
  `get_system_infos_raw` and `get_system_infos_human` of
  [`generic_helper.py`](be_helpers/generic_helper.py)

### Changed
- `gc.collect()` is no longer called on `client_data` property access of
  [`modbus_bridge.py`](be_helpers/modbus_bridge.py)

### Fixed
- Adopted import paths of Generic helper, Led, Neopixel, Path helper, Time
  helper and WiFi helper examples in [`README`](README.md).

## [1.1.2] - 2022-02-26
### Fixed
- Adopted import path of `modbus_bridge` in Modbus Bridge example in
  [`README`](README.md).
- Adopted import paths of `umodbus` files in
  [`modbus_bridge.py`](be_helpers/modbus_bridge.py)
- Provide installation instructions for `micropython-modbus` library in
  [`README`](README.md)
- Call `setup_registers` for either TCP or RTU client, not only in TCP client
  mode in [`modbus_bridge.py`](be_helpers/modbus_bridge.py)

## [1.1.1] - 2022-02-25
### Fixed
- Adopted import paths of `typing` module in all modules from
 `from typing import *` to `from .typing import *`
- Do not import any modules in [`__init__.py`](be_helpers/__init__.py) other
  than [`version.py`](be_helpers/version.py) to avoid issues and gain speed

## [1.1.0] - 2022-02-25
### Added
- [`message.py`](be_helpers/message.py) and [`queue.py`](be_helpers/queue.py)
  taken from [peterhinch's micropython async repo][ref-peterhinch-async]

## [1.0.0] - 2022-02-24
### Added
- [`setup.py`](setup.py) and [`sdist_upip.py`](sdist_upip.py) taken from
  [pfalcon's picoweb repo][ref-pfalcon-picoweb-sdist-upip] and PEP8 improved
- [`MIT License`](LICENSE)
- [`version.py`](be_helpers/version.py) storing current library version

### Changed
- Moved all helper files into folder named [`be_helpers`](be_helpers)
- Update [`README`](README.md) usage description of MicroPython lib deploy to
  [PyPi][ref-pypi]
- Usage examples in [`README`](README.md) updated with new import path
- Use `upip_utarfile` instead of external `micropython-utarfile` in
  [`update_helper.py`](be_helpers/update_helper.py)

### Removed
- Dependency to `micropython-utarfile` by using built-in `upip_utarfile`

## [0.2.0] - 2022-02-20
### Added
- Modbus data between RTU and TCP can be synchronized continously. Access to
  client is secured by thread lock ressource.

### Changed
- Reduce modbus logging output of get and set functions from `INFO` to `DEBUG`
- Returned dict of `read_all_registers` clusters registers by type instead of
  register names
- Tuple of failed and successfully updated registers dict is returned on
  register write functions instead of dictionary of failed registers only
- Setting and getting register data is done in try-catch block to avoid errors
  on unavailable registers or invalid response data
- Log client register data as JSON instead of dict to improve later logging
  data usage
- Default logging level of `ModbusBridge` increased from `DEBUG` to `WARNING`

### Fixed
- Update host and client unit on setting new connections settings
- Set logging level `INFO` not `DEBUG` if desired logger level is `info`
- Return dictionary of read content in `read_all_registers`

## [0.1.0] - 2022-02-19
### Added
- This changelog file
- [`.gitignore`](.gitignore) file
- [`README`](README.md) file with usage examples
- [`PathHelper`](path_helper.py) module added to provide `os.path.exists()`
  function
- [`ModbusBridge`](modbus_bridge.py) module to connect RTU with TCP and vice
  versa

### Changed
- `LED` and `Neopixel` helper module converted into classes of
  [`led_helper`](led_helper.py)
- [`TimeHelper`](time_helper.py) module converted into class
- [`WifiHelper`](wifi_helper.py) module converted into class

<!-- Links -->
[Unreleased]: https://github.com/brainelectronics/micropython-modules/compare/1.7.0...develop

[1.7.0]: https://github.com/brainelectronics/micropython-modules/tree/1.7.0
[1.6.1]: https://github.com/brainelectronics/micropython-modules/tree/1.6.1
[1.6.0]: https://github.com/brainelectronics/micropython-modules/tree/1.6.0
[1.5.0]: https://github.com/brainelectronics/micropython-modules/tree/1.5.0
[1.4.0]: https://github.com/brainelectronics/micropython-modules/tree/1.4.0
[1.3.0]: https://github.com/brainelectronics/micropython-modules/tree/1.3.0
[1.2.3]: https://github.com/brainelectronics/micropython-modules/tree/1.2.3
[1.2.2]: https://github.com/brainelectronics/micropython-modules/tree/1.2.2
[1.2.1]: https://github.com/brainelectronics/micropython-modules/tree/1.2.1
[1.2.0]: https://github.com/brainelectronics/micropython-modules/tree/1.2.0
[1.1.2]: https://github.com/brainelectronics/micropython-modules/tree/1.1.2
[1.1.1]: https://github.com/brainelectronics/micropython-modules/tree/1.1.1
[1.1.0]: https://github.com/brainelectronics/micropython-modules/tree/1.1.0
[1.0.0]: https://github.com/brainelectronics/micropython-modules/tree/1.0.0
[0.2.0]: https://github.com/brainelectronics/micropython-modules/tree/0.2.0
[0.1.0]: https://github.com/brainelectronics/micropython-modules/tree/0.1.0

[ref-pep440]: https://peps.python.org/pep-0440/
[ref-issue-11]: https://github.com/brainelectronics/micropython-modules/issues/11
[ref-issue-9]: https://github.com/brainelectronics/micropython-modules/issues/9
[ref-pypi]: https://pypi.org/
[ref-pfalcon-picoweb-sdist-upip]: https://github.com/pfalcon/picoweb/blob/b74428ebdde97ed1795338c13a3bdf05d71366a0/sdist_upip.py
[ref-peterhinch-async]: https://github.com/peterhinch/micropython-async/tree/a87bda1b716090da27fd288cc8b19b20525ea20c/v3/primitives

